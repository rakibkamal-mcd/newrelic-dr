{
  "name": "DR-Monitoring",
  "description": null,
  "permissions": "PUBLIC_READ_WRITE",
  "pages": [
    {
      "name": "Mcflow-Active",
      "description": null,
      "widgets": [
        {
          "title": "MSK Cluster Header",
          "layout": {
            "column": 1,
            "row": 1,
            "width": 12,
            "height": 1
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.markdown"
          },
          "rawConfiguration": {
            "text": "# MSK Cluster"
          }
        },
        {
          "title": "",
          "layout": {
            "column": 1,
            "row": 2,
            "width": 12,
            "height": 1
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.markdown"
          },
          "rawConfiguration": {
            "text": "### Network Error Metrics"
          }
        },
        {
          "title": "NetworkRx Dropped",
          "layout": {
            "column": 1,
            "row": 3,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`aws.kafka.NetworkRxDropped`) FROM Metric WHERE aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%' TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "NetworkTx Dropped",
          "layout": {
            "column": 5,
            "row": 3,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`aws.kafka.NetworkTxDropped`) FROM Metric WHERE aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%' TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "NetworkRx Errors",
          "layout": {
            "column": 1,
            "row": 6,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`aws.kafka.NetworkRxErrors`) FROM Metric WHERE aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%' TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "NetworkTx Errors",
          "layout": {
            "column": 5,
            "row": 6,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`aws.kafka.NetworkTxErrors`) FROM Metric WHERE aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%' TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "MSK Network Metrics Header",
          "layout": {
            "column": 1,
            "row": 9,
            "width": 12,
            "height": 1
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.markdown"
          },
          "rawConfiguration": {
            "text": "### Network Metrics"
          }
        },
        {
          "title": "# of Swaps Used",
          "layout": {
            "column": 1,
            "row": 10,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT max(`provider.swapUsed.Maximum`) FROM AwsMskBrokerSample WHERE (provider='AwsMskBroker' AND aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%') TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Avg Bytes In per Sec",
          "layout": {
            "column": 5,
            "row": 10,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`provider.bytesInPerSec.Average`) FROM AwsMskBrokerSample WHERE (provider='AwsMskBroker' AND aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%') TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Avg Bytes Out per Sec",
          "layout": {
            "column": 9,
            "row": 10,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`provider.bytesOutPerSec.Average`) FROM AwsMskBrokerSample WHERE (provider='AwsMskBroker' AND aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%') TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Active Client Connection Count",
          "layout": {
            "column": 1,
            "row": 13,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`aws.kafka.ClientConnectionCount`) FROM Metric WHERE aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%' TIMESERIES auto FACET aws.kafka.ClientAuthentication,aws.kafka.ClusterName"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Avg Msgs in Per Sec",
          "layout": {
            "column": 5,
            "row": 13,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`provider.messagesInPerSec.Average`) FROM AwsMskBrokerSample WHERE (provider='AwsMskBroker' AND aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%') TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Zookeeper Request Latency (ms)",
          "layout": {
            "column": 9,
            "row": 13,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`aws.kafka.ZooKeeperRequestLatencyMsMean`) FROM Metric WHERE aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%' TIMESERIES auto FACET aws.kafka.BrokerID"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "MSK Resourse Utilization Header",
          "layout": {
            "column": 1,
            "row": 16,
            "width": 12,
            "height": 1
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.markdown"
          },
          "rawConfiguration": {
            "text": "### Resource Metrics"
          }
        },
        {
          "title": "MSK Brokers CPU Average",
          "layout": {
            "column": 1,
            "row": 17,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`provider.cpuUser.Average`) + average(`provider.cpuSystem.Average`) FROM AwsMskBrokerSample WHERE (provider='AwsMskBroker' AND aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%') TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Number of Partitions",
          "layout": {
            "column": 5,
            "row": 17,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`aws.kafka.PartitionCount`) FROM Metric WHERE aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%' FACET aws.kafka.ClusterName, aws.kafka.BrokerID SINCE 30 MINUTES AGO TIMESERIES "
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Log Disk Usage (%)",
          "layout": {
            "column": 9,
            "row": 17,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT max(`provider.kafkaDataLogsDiskUsed.Maximum`) FROM AwsMskBrokerSample WHERE (provider='AwsMskBroker' AND aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%') TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Consumer Group Offset Lag",
          "layout": {
            "column": 1,
            "row": 20,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`aws.kafka.SumOffsetLag`) FROM Metric WHERE aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%' TIMESERIES auto FACET aws.kafka.ConsumerGroup,aws.kafka.Topic"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "# of Under Replicated Partitions",
          "layout": {
            "column": 5,
            "row": 20,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT max(`provider.underReplicatedPartitions.Maximum`) FROM AwsMskBrokerSample WHERE (provider='AwsMskBroker' AND aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%') TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Avg Root Disk Used (%)",
          "layout": {
            "column": 9,
            "row": 20,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`provider.rootDiskUsed.Average`) FROM AwsMskBrokerSample WHERE (provider='AwsMskBroker' AND aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%') TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Avg Memory Usage",
          "layout": {
            "column": 1,
            "row": 23,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT average(`provider.memoryUsed.Average`) FROM AwsMskBrokerSample WHERE (provider='AwsMskBroker' AND aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%') TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "# of Under Min ISR Partitions",
          "layout": {
            "column": 5,
            "row": 23,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT max(`provider.underMinIsrPartitionCount.Maximum`) FROM AwsMskBrokerSample WHERE (provider='AwsMskBroker' AND aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%') TIMESERIES auto FACET aws.kafka.ClusterName, aws.kafka.BrokerID"
              }
            ],
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Active Controller Count",
          "layout": {
            "column": 9,
            "row": 23,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT sum(`aws.kafka.ActiveControllerCount`) FROM Metric WHERE aws.kafka.ClusterName LIKE '%digital-mcflow-stg93-stage-us-msk-us-east-1%' TIMESERIES auto FACET aws.kafka.ClusterName"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        },
        {
          "title": "Log Metrics Header",
          "layout": {
            "column": 1,
            "row": 26,
            "width": 12,
            "height": 1
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.markdown"
          },
          "rawConfiguration": {
            "text": "### Log Metrics"
          }
        },
        {
          "title": "Total Logs",
          "layout": {
            "column": 1,
            "row": 27,
            "width": 2,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT count(*) AS 'Total Logs' FROM Log where message LIKE '%%' and `aws.logGroup` LIKE '%mcflow-stg-na-msk%'"
              }
            ],
            "thresholds": []
          }
        },
        {
          "title": "Error Logs",
          "layout": {
            "column": 3,
            "row": 27,
            "width": 2,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.billboard"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT count(*) AS 'Error Logs' FROM Log where message LIKE '%] ERROR%' and `aws.logGroup` LIKE '%mcflow-stg-na-msk%'"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "Error Log By Type",
          "layout": {
            "column": 5,
            "row": 27,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.table"
          },
          "rawConfiguration": {
            "dataFormatters": [],
            "facet": {
              "showOtherSeries": false
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT count(*) FROM Log where `aws.logGroup` LIKE '%mcflow-stg-na-msk%' AND message LIKE '%] ERROR%' FACET message"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            }
          }
        },
        {
          "title": "Error Logs",
          "layout": {
            "column": 9,
            "row": 27,
            "width": 4,
            "height": 3
          },
          "linkedEntityGuids": null,
          "visualization": {
            "id": "viz.line"
          },
          "rawConfiguration": {
            "facet": {
              "showOtherSeries": false
            },
            "legend": {
              "enabled": true
            },
            "nrqlQueries": [
              {
                "accountId": 805553,
                "query": "SELECT count(*) FROM Log where `aws.logGroup` LIKE '%mcflow-stg-na-msk%' AND message LIKE '%] ERROR%' FACET message TIMESERIES AUTO"
              }
            ],
            "platformOptions": {
              "ignoreTimeRange": false
            },
            "yAxisLeft": {
              "zero": true
            }
          }
        }
      ]
    }
  ]
}